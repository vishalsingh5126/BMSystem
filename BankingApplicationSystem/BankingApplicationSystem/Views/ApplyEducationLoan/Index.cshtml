@model BankingApplicationSystem.Models.EducationLoan.Edu_Loan_Details

@{
    ViewBag.Title = "Apply Education Loan";
}
@{
    List<SelectListItem> LoanDurationList = new List<SelectListItem>();
    LoanDurationList.Add(new SelectListItem
    {
        Text = "5",
        Value = "5",
        Selected = true
    });
    LoanDurationList.Add(new SelectListItem
    {
        Text = "10",
        Value = "10"
        
    });
}
<br /><br /><br />
<h2>Apply for Education Loan</h2>


@using (Html.BeginForm("initiateEducationLoan", "ApplyEducationLoan", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.id)

        @*<div class="form-group">
            @Html.LabelFor(model => model.EDUCATION_LOAN_ID, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EDUCATION_LOAN_ID, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EDUCATION_LOAN_ID, "", new { @class = "text-danger" })
            </div>
        </div>*@

        <div class="form-group">
            @Html.LabelFor(model => model.ACCOUNT_NUMBER, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.ACCOUNT_NUMBER, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ACCOUNT_NUMBER, "", new { @class = "text-danger" })
            </div>
        </div>

        @*<div class="form-group">
            @Html.LabelFor(model => model.EDU_LOAN_ACCOUNT_NUMBER, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EDU_LOAN_ACCOUNT_NUMBER, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EDU_LOAN_ACCOUNT_NUMBER, "", new { @class = "text-danger" })
            </div>
        </div>*@

        <div class="form-group">
            @Html.LabelFor(model => model.EDU_LOAN_AMOUNT, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EDU_LOAN_AMOUNT, new { htmlAttributes = new { @class = "form-control", } })
                @Html.ValidationMessageFor(model => model.EDU_LOAN_AMOUNT, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.EDU_LOAN_APPLY_DATE, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.EDU_LOAN_APPLY_DATE, new { htmlAttributes = new { @class = "form-control"} })
                @*@Html.TextBox("StartDate", Model.EDU_LOAN_APPLY_DATE, new { @class = "datepicker", @type = "date" })*@
                @Html.ValidationMessageFor(model => model.EDU_LOAN_APPLY_DATE, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.EDU_LOAN_DURATION, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @*@Html.EditorFor(model => model.EDU_LOAN_DURATION, new { htmlAttributes = new { @class = "form-control" } })*@
                @Html.DropDownListFor(model => model.EDU_LOAN_DURATION, LoanDurationList)
                @Html.ValidationMessageFor(model => model.EDU_LOAN_DURATION, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.COURSE_NAME, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.COURSE_NAME, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.COURSE_NAME, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.COURSE_FEE, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.COURSE_FEE, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.COURSE_FEE, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.FATHER_NAME, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FATHER_NAME, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.FATHER_NAME, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ID_CARD_NUMBER, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.ID_CARD_NUMBER, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ID_CARD_NUMBER, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.FATHER_ANNUAL_INCOME, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FATHER_ANNUAL_INCOME, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.FATHER_ANNUAL_INCOME, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" id="save" value="Save" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<script>
    $(document).ready(function () {
        $("#ACCOUNT_NUMBER").change(function () {
            var acc_num = $('#ACCOUNT_NUMBER').val();
            if (acc_num <= 999999999999999 || acc_num > 9999999999999999)
                alert("Please enter a 16 digit account number.");
            else {
                $.ajax({
                    url: '/PerformTransaction/CheckAccNumber',
                    type: 'POST',
                    dataType: 'json',
                    data: { acc_num: acc_num },
                    success: function (data) {

                    },
                    error: function () {
                        $('#ACCOUNT_NUMBER').val('');
                        alert("Acount Number does not Exist, please enter 16 digit account number.");
                    }
                });
            }
        });

        $("#COURSE_FEE").change(function () {
            var fee = $('#COURSE_FEE').val();
            if(fee>2000000)
            {
                alert("Course fee can not be greater that 20 lacks")
                $('#COURSE_FEE').val('');
            }
            if(fee<0)
            {
                alert("Course fee can not be negative number.")
                $('#COURSE_FEE').val('');
            }
        });

        $("#EDU_LOAN_AMOUNT").change(function () {
            var l_amount = $('#EDU_LOAN_AMOUNT').val();
            if (l_amount < 0) {
                alert("Loan amount can not be negative number.")
                $('#EDU_LOAN_AMOUNT').val('');
            }
        });

        $("#FATHER_ANNUAL_INCOME").change(function () {
            var annual_income = $('#FATHER_ANNUAL_INCOME').val();
            if (annual_income < 0) {
                alert("Annual income can not be negative number.")
                $('#FATHER_ANNUAL_INCOME').val('');
            }
        });

        $("#ID_CARD_NUMBER").change(function () {
            var id_num = $('#ID_CARD_NUMBER').val();
            if (id_num < 0) {
                alert("ID Card number can not be negative.")
                $('#ID_CARD_NUMBER').val('');
            }
            if (id_num <= 9999) {
                alert("Please enter alteast 5 digit ID Card number");
                $('#ID_CARD_NUMBER').val('');
            }
        });
        $(function () {
            $('#EDU_LOAN_APPLY_DATE').datepicker()
            format: 'mm/dd/yyyy'
        });

        

    });
</script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="Stylesheet" type="text/css" />
}
